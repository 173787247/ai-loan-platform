# 🔧 华为路由器端口转发配置指南

## 📋 当前网络信息
- **路由器IP**: 192.168.4.1
- **您的电脑IP**: 192.168.4.11
- **公网IP**: 192.3.23.66

## 🎯 需要转发的端口
- **主应用**: 3000 → 192.168.4.11:3000
- **管理后台**: 3001 → 192.168.4.11:3001
- **AI服务**: 8000 → 192.168.4.11:8000
- **API网关**: 8080 → 192.168.4.11:8080

## 🔍 寻找端口转发设置

### 方法1：在"安全设置"中查找
1. 点击左侧菜单 **"安全设置"**
2. 查找以下选项：
   - "端口转发" (Port Forwarding)
   - "虚拟服务器" (Virtual Server)
   - "NAT设置" (NAT Settings)

### 方法2：在"系统设置"中查找
1. 点击左侧菜单 **"系统设置"**
2. 查找以下选项：
   - "端口映射" (Port Mapping)
   - "DMZ主机" (DMZ Host)
   - "高级设置" (Advanced Settings)

### 方法3：在"更多功能"中查找
1. 点击顶部 **"更多功能"**
2. 查找以下选项：
   - "端口转发" (Port Forwarding)
   - "虚拟服务器" (Virtual Server)
   - "NAT设置" (NAT Settings)

## ⚙️ 配置步骤（找到端口转发后）

### 步骤1：添加主应用端口转发
```
服务名称: AI助贷平台-主应用
协议类型: TCP
外网端口: 3000
内网IP: 192.168.4.11
内网端口: 3000
状态: 启用
```

### 步骤2：添加管理后台端口转发
```
服务名称: AI助贷平台-管理后台
协议类型: TCP
外网端口: 3001
内网IP: 192.168.4.11
内网端口: 3001
状态: 启用
```

### 步骤3：添加AI服务端口转发
```
服务名称: AI助贷平台-AI服务
协议类型: TCP
外网端口: 8000
内网IP: 192.168.4.11
内网端口: 8000
状态: 启用
```

### 步骤4：添加API网关端口转发
```
服务名称: AI助贷平台-API网关
协议类型: TCP
外网端口: 8080
内网IP: 192.168.4.11
内网端口: 8080
状态: 启用
```

## 🚀 配置完成后测试

从公司访问以下地址：
- **主应用**: http://192.3.23.66:3000
- **管理后台**: http://192.3.23.66:3001
- **AI服务**: http://192.3.23.66:8000
- **API网关**: http://192.3.23.66:8080

## ❓ 如果找不到端口转发选项

### 替代方案1：使用DMZ主机
1. 找到 **"DMZ主机"** 设置
2. 启用DMZ主机
3. 设置DMZ主机IP为: 192.168.4.11
4. 保存设置

### 替代方案2：使用UPnP
1. 点击左侧菜单 **"UPnP"**
2. 启用UPnP功能
3. 让应用程序自动配置端口转发

## 🔍 华为路由器常见位置

不同型号的华为路由器，端口转发可能位于：
- **安全设置** → **端口转发**
- **系统设置** → **NAT设置** → **端口映射**
- **更多功能** → **高级设置** → **端口转发**
- **网络设置** → **NAT设置** → **虚拟服务器**

## ⚠️ 注意事项

1. **保存设置**: 每添加一个端口转发规则后，记得点击"保存"
2. **重启路由器**: 某些设置可能需要重启路由器才能生效
3. **防火墙**: 确保Windows防火墙允许这些端口
4. **IP固定**: 建议将电脑IP设置为固定IP，避免重启后IP变化

## 🆘 如果仍然无法访问

如果配置后仍然无法从外网访问，可能的原因：
1. 网络提供商限制了入站连接
2. 路由器不支持端口转发
3. 需要联系网络提供商开通端口转发服务

此时建议使用内网穿透工具：
- ngrok: https://ngrok.com
- frp: https://github.com/fatedier/frp
- 花生壳: https://hsk.oray.com
