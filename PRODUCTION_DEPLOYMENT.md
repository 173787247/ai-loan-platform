# AIåŠ©è´·æ‹›æ ‡å¹³å° - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†AIåŠ©è´·æ‹›æ ‡å¹³å°çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¶æ„ã€é…ç½®è¯´æ˜ã€éƒ¨ç½²æ­¥éª¤å’Œç›‘æ§ç»´æŠ¤ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å¾®æœåŠ¡æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx LB      â”‚    â”‚   API Gateway   â”‚    â”‚   AI Service    â”‚
â”‚   Port: 80/443  â”‚â”€â”€â”€â”€â”‚   Port: 8080    â”‚â”€â”€â”€â”€â”‚   Port: 8000    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web App       â”‚    â”‚  User Service   â”‚    â”‚  Loan Service   â”‚
â”‚   Port: 3000    â”‚    â”‚   Port: 8081    â”‚    â”‚   Port: 8082    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin App      â”‚    â”‚  Risk Service   â”‚    â”‚Matching Service â”‚
â”‚   Port: 3001    â”‚    â”‚   Port: 8083    â”‚    â”‚   Port: 8084    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®å­˜å‚¨
- **MySQL**: ä¸»æ•°æ®åº“ (Port: 3306)
- **Redis**: ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ (Port: 6379)
- **MongoDB**: æ–‡æ¡£å­˜å‚¨ (Port: 27017)
- **Elasticsearch**: æœç´¢å¼•æ“ (Port: 9200)

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### 1. ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+) / Windows 10+ / macOS
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **å†…å­˜**: æœ€ä½ 8GBï¼Œæ¨è 16GB+
- **å­˜å‚¨**: æœ€ä½ 50GB å¯ç”¨ç©ºé—´
- **GPU**: å¯é€‰ï¼Œç”¨äºAIæœåŠ¡åŠ é€Ÿ

#### å®‰è£…Docker
```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# Windows/macOS
# ä¸‹è½½å¹¶å®‰è£… Docker Desktop
```

### 2. é…ç½®ç¯å¢ƒ

#### å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
```bash
cp env.prod.example .env.prod
```

#### ç¼–è¾‘ç”Ÿäº§ç¯å¢ƒé…ç½®
```bash
nano .env.prod
```

å…³é”®é…ç½®é¡¹ï¼š
```env
# æ•°æ®åº“å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å¼ºå¯†ç ï¼‰
MYSQL_ROOT_PASSWORD=your-strong-password
MYSQL_PASSWORD=your-strong-password

# JWTå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨éšæœºç”Ÿæˆçš„å¯†é’¥ï¼‰
JWT_SECRET=your-super-secret-jwt-key

# åŸŸåé…ç½®
REACT_APP_API_BASE_URL=https://your-domain.com/api
REACT_APP_AI_SERVICE_URL=https://your-domain.com/ai
```

### 3. éƒ¨ç½²æœåŠ¡

#### ä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Linux/macOS
chmod +x deploy-prod.sh
./deploy-prod.sh

# Windows
deploy-prod.bat
```

#### æ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. æ„å»ºé•œåƒ
docker-compose -f docker-compose.prod.yml build

# 2. å¯åŠ¨æ•°æ®åº“æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d mysql redis mongodb elasticsearch

# 3. ç­‰å¾…æ•°æ®åº“å¯åŠ¨
sleep 30

# 4. å¯åŠ¨AIæœåŠ¡
docker-compose -f docker-compose.prod.yml up -d ai-service

# 5. å¯åŠ¨åç«¯æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d user-service loan-service risk-service matching-service admin-service

# 6. å¯åŠ¨ç½‘å…³
docker-compose -f docker-compose.prod.yml up -d gateway

# 7. å¯åŠ¨å‰ç«¯åº”ç”¨
docker-compose -f docker-compose.prod.yml up -d web-app admin-app

# 8. å¯åŠ¨Nginx
docker-compose -f docker-compose.prod.yml up -d nginx
```

## ğŸ”§ é…ç½®è¯´æ˜

### Nginxé…ç½®
- **è´Ÿè½½å‡è¡¡**: è‡ªåŠ¨åˆ†å‘è¯·æ±‚åˆ°åç«¯æœåŠ¡
- **SSLç»ˆæ­¢**: æ”¯æŒHTTPSé…ç½®
- **é™æ€èµ„æºç¼“å­˜**: ä¼˜åŒ–å‰ç«¯èµ„æºåŠ è½½
- **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨æ£€æµ‹æœåŠ¡çŠ¶æ€

### ç½‘å…³é…ç½®
- **è·¯ç”±ç®¡ç†**: ç»Ÿä¸€APIå…¥å£
- **è®¤è¯æˆæƒ**: JWTä»¤ç‰ŒéªŒè¯
- **é™æµæ§åˆ¶**: é˜²æ­¢APIæ»¥ç”¨
- **ç›‘æ§æ—¥å¿—**: è¯·æ±‚è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§

### AIæœåŠ¡é…ç½®
- **GPUåŠ é€Ÿ**: è‡ªåŠ¨æ£€æµ‹å’Œä½¿ç”¨GPU
- **æ¨¡å‹ç®¡ç†**: æ”¯æŒæ¨¡å‹çƒ­æ›´æ–°
- **æ€§èƒ½ç›‘æ§**: å®æ—¶ç›‘æ§æ¨¡å‹æ€§èƒ½
- **å®¹é”™å¤„ç†**: è‡ªåŠ¨é‡è¯•å’Œé™çº§

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æœåŠ¡ç›‘æ§

#### ä½¿ç”¨ç›‘æ§è„šæœ¬
```bash
# æ‰§è¡Œä¸€æ¬¡ç›‘æ§æ£€æŸ¥
chmod +x monitor-prod.sh
./monitor-prod.sh

# å®æ—¶ç›‘æ§
./monitor-prod.sh realtime

# ç”Ÿæˆç›‘æ§æŠ¥å‘Š
./monitor-prod.sh report
```

#### æ‰‹åŠ¨æ£€æŸ¥
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f [service-name]

# æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
docker stats
```

### 2. æ€§èƒ½æµ‹è¯•

#### è¿è¡ŒAPIæµ‹è¯•
```bash
python test-prod-api.py
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- æœåŠ¡å¥åº·æ£€æŸ¥
- APIå“åº”æ—¶é—´
- è´Ÿè½½æµ‹è¯•
- é”™è¯¯ç‡ç»Ÿè®¡

### 3. æ—¥å¿—ç®¡ç†

#### æ—¥å¿—ä½ç½®
- **åº”ç”¨æ—¥å¿—**: `logs/applications/`
- **Nginxæ—¥å¿—**: `logs/nginx/`
- **Dockeræ—¥å¿—**: `docker logs [container-name]`

#### æ—¥å¿—è½®è½¬
```bash
# é…ç½®logrotate
sudo nano /etc/logrotate.d/ai-loan-platform
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. ç½‘ç»œå®‰å…¨
- é…ç½®é˜²ç«å¢™è§„åˆ™
- ä½¿ç”¨HTTPSåŠ å¯†
- é™åˆ¶ç«¯å£è®¿é—®
- è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨

### 2. æ•°æ®å®‰å…¨
- æ•°æ®åº“åŠ å¯†å­˜å‚¨
- æ•æ„Ÿä¿¡æ¯ç¯å¢ƒå˜é‡åŒ–
- å®šæœŸå¤‡ä»½æ•°æ®
- è®¿é—®æ—¥å¿—å®¡è®¡

### 3. åº”ç”¨å®‰å…¨
- JWTä»¤ç‰Œå®‰å…¨é…ç½®
- APIé™æµå’Œé˜²åˆ·
- è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
- é”™è¯¯ä¿¡æ¯è„±æ•

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–
- é…ç½®è¿æ¥æ± 
- åˆ›å»ºé€‚å½“ç´¢å¼•
- å®šæœŸæ¸…ç†å†å²æ•°æ®
- ç›‘æ§æ…¢æŸ¥è¯¢

### 2. ç¼“å­˜ç­–ç•¥
- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- é™æ€èµ„æºCDNåŠ é€Ÿ
- æ•°æ®åº“æŸ¥è¯¢ç¼“å­˜
- ä¼šè¯çŠ¶æ€ç¼“å­˜

### 3. è´Ÿè½½å‡è¡¡
- Nginxè´Ÿè½½å‡è¡¡é…ç½®
- æœåŠ¡å®ä¾‹æ°´å¹³æ‰©å±•
- å¥åº·æ£€æŸ¥é…ç½®
- æ•…éšœè½¬ç§»æœºåˆ¶

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥å®¹å™¨æ—¥å¿—
docker logs [container-name]

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tuln | grep :[port]

# æ£€æŸ¥èµ„æºä½¿ç”¨
docker stats
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker exec -it ai-loan-mysql-prod mysql -u root -p

# æ£€æŸ¥ç½‘ç»œè¿æ¥
docker network ls
docker network inspect ai-loan-platform_ai-loan-network
```

#### 3. AIæœåŠ¡å¼‚å¸¸
```bash
# æ£€æŸ¥GPUçŠ¶æ€
nvidia-smi

# æ£€æŸ¥AIæœåŠ¡æ—¥å¿—
docker logs ai-loan-ai-service-prod

# é‡å¯AIæœåŠ¡
docker-compose -f docker-compose.prod.yml restart ai-service
```

### åº”æ€¥å¤„ç†

#### 1. æœåŠ¡é™çº§
```bash
# åœæ­¢éå…³é”®æœåŠ¡
docker-compose -f docker-compose.prod.yml stop [service-name]

# å¯ç”¨ç»´æŠ¤æ¨¡å¼
echo "ç³»ç»Ÿç»´æŠ¤ä¸­" > maintenance.html
```

#### 2. æ•°æ®æ¢å¤
```bash
# ä»å¤‡ä»½æ¢å¤æ•°æ®åº“
docker exec -i ai-loan-mysql-prod mysql -u root -p < backup.sql

# æ¢å¤æ–‡ä»¶æ•°æ®
tar -xzf data-backup.tar.gz
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: tech-support@ai-loan-platform.com
- **ç´§æ€¥è”ç³»**: emergency@ai-loan-platform.com
- **æ–‡æ¡£æ›´æ–°**: docs@ai-loan-platform.com

### ç‰ˆæœ¬ä¿¡æ¯
- **å½“å‰ç‰ˆæœ¬**: v6.0.0
- **æœ€åæ›´æ–°**: 2025-09-22
- **å…¼å®¹æ€§**: Docker 20.10+, Docker Compose 2.0+

---

**æ³¨æ„**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰è¯·ä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£ï¼Œå¹¶æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´é…ç½®å‚æ•°ã€‚å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚
